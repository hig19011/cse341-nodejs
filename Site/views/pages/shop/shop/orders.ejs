<%- include('../includes/head.ejs') %>
<link rel="stylesheet" href="/stylesheets/shop/orders.css">
</head>

<body>
  <%- include('../includes/navigation.ejs') %>
  <main>
    <% if (orders.length <= 0) { %>
      <h1>Nothing there!</h1>
    <% } else { %> 
      <ul class="orders">
        <% orders.forEach(order => {%>
          <li class="orders__item">
            <span>Order - #<%= order._id %></span>
            <ul class="orders__products">
              <% 
                let total = 0; 
                order.products.forEach(p => { %>                
                <li class="orders__products-item">
                  <h1><%= p.product.title %></h1>                  
                  <img src="<%= p.product.imageUrl %>">                  
                  <span>(<%= p.quantity %>) @ $<%= p.product.price%></span>           
                  <% total += p.quantity * p.product.price; %>
                </li>
              <% }); %>
              <li class="orders__products-item orders__products-total">
                <span></span>      
                <span></span>      
                <span>Total Price: $<%= total.toFixed(2) %></span>           
              </li>
            </ul>
          </li>
        
        <% }); %>
      </ul>
    
    <% } %>
  </main>
  <%- include('../includes/end.ejs') %>